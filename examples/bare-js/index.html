<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Testy Fedimint Web SDK Bare</title>
  </head>

<body>
  <script type="module">
    import * as Default from './index.js';
    const { FedimintWallet } = Default;

    const TESTNET_INVITE_CODE = 'fed11qgqzc2nhwden5te0vejkg6tdd9h8gepwvejkg6tdd9h8garhduhx6at5d9h8jmn9wshxxmmd9uqqzgxg6s3evnr6m9zdxr6hxkdkukexpcs3mn7mj3g5pc5dfh63l4tj6g9zk4er'

    (async () => {
      try {
        const wallet = new FedimintWallet();
        wallet.setLogLevel('debug')

        // Tries to open the wallet. If it's not open (new user), it joins the federation
        const isOpen = await wallet.open()
        if (!isOpen) {
          const joinRes = await wallet.joinFederation(TESTNET_INVITE_CODE)
        }
        
        // HACK: Expose client to global for testing in the browser console
        globalThis.wallet = wallet

      } catch (e) {
        console.error(e);
      }
    })()

  </script>
</body>

</html>